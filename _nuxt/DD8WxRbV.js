import{V as C,f as F,_ as w}from"./QP_2F6Ss.js";import{_ as D,r,n as I,q as _,c as h,u as a,s as v,v as u,b as i,x,w as d,o as n,a as b,t as S,p as B,e as P,y as T}from"./CJVNMOIT.js";import{u as U,V as N,a as R}from"./DU85qYpb.js";import{V as $,a as z}from"./DpEWxPBG.js";import"./CuiatCoy.js";const A=t=>(B("data-v-d7eed24d"),t=t(),P(),t),E={key:1},j=A(()=>b("h1",{class:"mb-4"},"Files library",-1)),q=["onClick"],G={__name:"AllFiles",setup(t){const g=T(),s=r(null),c=r(!1),p=r(""),o=r(""),k=[{title:"Name",value:"originalname",sortable:!0},{title:"Page count",value:"numberOfPages",sortable:!0},{title:"Size (kb)",value:"size",sortable:!0},{title:"Format",value:"format"},{title:"Upload Date",value:"uploadDate",sortable:!0},{title:"Uploaded by",value:"uploadedByUser",sortable:!0}];async function y(){try{const e=await $fetch(`${g.public.apiUrl}/api/files`,{method:"GET",credentials:"include"});s.value=F(e)}catch(e){_("/"),console.error("Error fetching user data:",e)}}function m(e){e&&(p.value=e),c.value=!c.value}return I(()=>{if(!U("userId").value){_("/");return}y()}),(e,f)=>{const V=w;return n(),h("div",null,[a(s)?u("",!0):(n(),v(z,{key:0,fluid:""},{default:d(()=>[i(R,{class:"h-screen align-center justify-center"},{default:d(()=>[i($,{size:70,width:7,color:"primary",indeterminate:""})]),_:1})]),_:1})),a(s)?(n(),h("div",E,[j,i(N,{modelValue:a(o),"onUpdate:modelValue":f[0]||(f[0]=l=>x(o)?o.value=l:null),label:"Search","solo-inverted":"","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"]),i(C,{headers:k,items:a(s),"item-key":"_id",class:"elevation-1",search:a(o)},{"item.originalname":d(({item:l})=>[b("span",{class:"clickable",onClick:M=>m(l.path)},S(l.originalname),9,q)]),_:1},8,["items","search"]),a(c)?(n(),v(V,{key:0,onClose:m,path:a(p)},null,8,["path"])):u("",!0)])):u("",!0)])}}},Q=D(G,[["__scopeId","data-v-d7eed24d"]]);export{Q as default};
