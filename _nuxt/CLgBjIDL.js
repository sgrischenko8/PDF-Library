import{V as y,f as C,_ as F}from"./SlNJ6N4-.js";import{_ as w,r,n as D,q as _,c as h,u as a,s as v,v as u,b as i,x as I,w as d,o as n,a as b,t as x,p as S,e as B}from"./ColKDS14.js";import{u as P,V as T,a as N}from"./B2ZbQMYJ.js";import{V as U,a as z}from"./CRKpG43m.js";import"./aY4vZAoK.js";const A=t=>(S("data-v-a9c6d050"),t=t(),B(),t),E={key:1},R=A(()=>b("h1",{class:"mb-4"},"Files library",-1)),$=["onClick"],j={__name:"AllFiles",setup(t){const s=r(null),c=r(!1),p=r(""),o=r(""),k=[{title:"Name",value:"originalname",sortable:!0},{title:"Page count",value:"numberOfPages",sortable:!0},{title:"Size (kb)",value:"size",sortable:!0},{title:"Format",value:"format"},{title:"Upload Date",value:"uploadDate",sortable:!0},{title:"Uploaded by",value:"uploadedByUser",sortable:!0}];async function V(){try{const e=await $fetch("http://localhost:3001/api/files",{method:"GET",credentials:"include"});s.value=C(e)}catch(e){_("/"),console.error("Error fetching user data:",e)}}function m(e){e&&(p.value=e),c.value=!c.value}return D(()=>{if(!P("userId").value){_("/");return}V()}),(e,f)=>{const g=F;return n(),h("div",null,[a(s)?u("",!0):(n(),v(z,{key:0,fluid:""},{default:d(()=>[i(N,{class:"h-screen align-center justify-center"},{default:d(()=>[i(U,{size:70,width:7,color:"primary",indeterminate:""})]),_:1})]),_:1})),a(s)?(n(),h("div",E,[R,i(T,{modelValue:a(o),"onUpdate:modelValue":f[0]||(f[0]=l=>I(o)?o.value=l:null),label:"Search","solo-inverted":"","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue"]),i(y,{headers:k,items:a(s),"item-key":"_id",class:"elevation-1",search:a(o)},{"item.originalname":d(({item:l})=>[b("span",{class:"clickable",onClick:q=>m(l.path)},x(l.originalname),9,$)]),_:1},8,["items","search"]),a(c)?(n(),v(g,{key:0,onClose:m,path:a(p)},null,8,["path"])):u("",!0)])):u("",!0)])}}},K=w(j,[["__scopeId","data-v-a9c6d050"]]);export{K as default};
